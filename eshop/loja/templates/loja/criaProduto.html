
{% extends 'loja/main.html' %}


{% block content %}
<style>
    label{
        width: 7em;
    }
</style>
<form action="{% url 'loja:criaProduto' %}" id="formulario" method="post" enctype="multipart/form-data"> {% csrf_token %}

    <button type="submit" >Criar</button>

    <br>
    <br>
    <!-- dados produto -->
    <label id="name" for="novoP"><b>Nome:</b></label>
    <input type="text" name="novoP" id="novoP" required>
    <br>

    <label for="desc"><b>Descrição:</b></label>
    <input type="text" name="desc" id="desc" required>
    <br>

    <label for="precoP"><b>Preço:</b></label>
    <input type="number" name="precoP" id="precoP" required>
    <br>

    <label for="Foto"><b>Foto:</b></label>
    <input type="file" name="fotoP" id="Foto" required>
    <br>

    <!--quando clica na checkbox aparece o div personalizar-->
    <label for="isPers"><b>Personalizável:</b></label>
    <input class ="checkbox" type="checkbox" id="isPers" name="isPers" value="True">
      <!-- dados produto -->
        <div id="question">
            
        </div>



     
    
  
</form>
{% endblock content %}

{% block js %}
  {% load static %}
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script>
    var q=0;

    $(document).on('change', '.checkbox', function() {   
        var button;    
        if(this.checked ) {
            var test = $('<input/>', {
                type: 'submit',
                class: 'add_questao',
                value: 'Adiciona Questão',
                click: function () { Cria_Questao(); }
            });
            $('#question').append(test).end();
            Cria_Questao();
        }else{
                $('.add_questao').remove();
                $('.add_op').remove();
                $('.questao').remove();
                $('.questaoLabel').remove();
                $('.remover').remove();
                q=0;
        }
        });

        function Cria_Questao(){
            q++;
            var quez=q;
            if(q>4){
                alert("nao pode criar mais");
            }else{
                var add_op = $('<input/>', {
                type: 'submit',
                value: 'Adiciona Opção',
                class: 'add_op',
                text: 'Adiciona Opção',
                click: function () { adicionar(quez) ; }
                });
                label="<label  class=questaoLabel for=questao"+(q)+"'>Questao</label>"
                input = jQuery('<input class=questao type="text" id="questao_'+(q)+'" name="questao" required>');
                jQuery('#formulario').append("<br class=remover>"+label).append(input).append(add_op).append("<br class=remover>");
                adicionar(quez);
            }
          
        }

  
        function adicionar(sapo){
           inputi = jQuery('<input class=questao type="text" id="opcao_'+(sapo)+'" name="questao_'+(sapo)+'" required>');
           jQuery('#formulario').append("<label  class=questaoLabel for=opcao_"+(sapo)+"'>Opção</label> ").append(inputi).append("<br class=remover>");
        }
 
       
        
    
    
    
    
    
    
    
    
    /* 
    
    
    
    
    
    
    
    
    
    
    
       
    // questaoCounter tem de ser clobal mas o counter tem de ser p cada iteração
          var counter = 1;
          var dynamicInput = [];
          // var questaoCounter = 1;
          // var personalizar =[];
    
         function addInputTo(questaoID){
              // if (questaoID == questaoCounter){
                  var newdiv = document.createElement('div');
                  newdiv.id = dynamicInput[counter];
                  newdiv.name = "opcao"+counter+"Q"+parseInt(questaoID);
                  newdiv.innerHTML = "Entry " + (counter + 1) + " <br><input type='text' name='myInputs[]'> <input type='button' value='-' onClick='removeInput("+dynamicInput[counter]+");'>";
                  document.getElementById('formulario').appendChild(newdiv);
                  counter++;
              // }
         // }
    
          //function removeInput(id){
            //  var elem = document.getElementById(id);
          //    return elem.parentNode.removeChild(elem);
        //  }
    
          // function novodivpersonalizar(){
          //     if (questaoCounter != 4){
          //         var newdive = document.createElement('div');
          //         newdive.id = personalizar[questaoCounter];
          //         newdive.name= "questao"+questaoCounter;
          //         newdive.innerHTML = document.getElementById('personalizar').innerHTML ;
          //         document.getElementById('formulario').appendChild(newdive);
          //         questaoCounter++;
          //         counter=1;
          //     }
         // } */
      </script>
  {% endblock js %}

