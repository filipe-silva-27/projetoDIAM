
{% extends 'loja/main.html' %}


{% block content %}
<style>
    label{
        width: 7em;
    }
</style>
<center>
<form  style="width: 70%; background-color:beige;" action="{% url 'loja:criaProduto' %}" id="formulario" method="post" enctype="multipart/form-data"> {% csrf_token %}



    <br>
    <br>
    <!-- dados produto -->
    <div class="form-group ">
    <label id="name" for="novoP"><b>Nome:</b></label>
    <input class="form-control" type="text" name="novoP" id="novoP" required>
    <br>
</div>

    <div class="form-group">
    <label for="desc"><b>Descrição:</b></label>
    <input class="form-control" type="text" name="desc" id="desc" required>
    <br>
</div>

    <div class="form-group"></div>
    <label for="precoP"><b>Preço:</b></label>
    <input class="form-control" type="number" name="precoP" id="precoP" required>
    <br>
</div>

    <div class="form-group">
    <label for="Foto"><b>Foto:</b></label>
    <input class="form-control" type="file" name="fotoP" id="Foto" required>
    <br>
    </div>
    <!--quando clica na checkbox aparece o div personalizar-->
    <label for="isPers"><b>Personalizável:</b></label>
    <input class ="checkbox" type="checkbox" id="isPers" name="isPers" value="True">
    
        <div id="question">
        </div>
        <div style="background-color:whitesmoke;">
        <div class="form-group" id="questao_1"></div>
        <div class="form-group" id="questao_2"></div>
        <div class="form-group" id="questao_3"></div>
        <div class="form-group" id="questao_4"></div>
    </div>
  
     
    
    <button type="submit" class="btn btn-primary" >Criar</button>
</form>
</center>
{% endblock content %}

{% block js %}
  {% load static %}
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script>
    var q=0;

    $(document).on('change', '.checkbox', function() {   
        if(this.checked ) {
            var test = $('<input/>', { type: 'submit', class: 'remover', value: 'Adiciona Questão', click: function () { Cria_Questao(); } });
            $('#question').append(test).end();
            Cria_Questao();
        }else{
                $('.remover').remove();
           //    $('.form-control').remove();

                q=0;
        }
        });

        function Cria_Questao(){
            q++;
            var quez=q;
            if(q>4){
                alert("nao pode criar mais");
            }else{
                var add_op = $('<input/>', { type: 'submit', value: 'Adiciona Opção', class: 'remover', text: 'Adiciona Opção', click: function () { adicionar(quez) ; }});
                label="<label  class=remover for=questao"+(q)+"'><b>Questão:</b></label>"
                input = jQuery('<input class="remover form-control" type="text" id="questao_'+(q)+'" name="questao" required>');
                jQuery("#questao_"+q).append("<br class=remover>"+label).append(input).append(add_op).append("<br class=remover>");
                adicionar(quez);
            }
  
          
        }
      
        function adicionar(sapo){
           inputi = jQuery('<input class="remover form-control" type="text" id="opcao_'+(sapo)+'" name="questao_'+(sapo)+'" required>');
           jQuery("#questao_"+sapo).append("<label  class=remover for=opcao_"+(sapo)+"'><b>Opção:</b></label> ").append(inputi).append("<br class=remover>");
        }
 

      </script>
  {% endblock js %}

