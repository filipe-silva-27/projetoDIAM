
{% extends 'loja/main.html' %}


{% block content %}
<style>
    label{
        width: 7em;
    }
</style>
<form action="{% url 'loja:criaProduto' %}" id="formulario" method="post" enctype="multipart/form-data"> {% csrf_token %}

    <button type="submit" >Criar</button>

    <br>
    <br>
    <!-- dados produto -->
    <label id="name" for="novoP"><b>Nome:</b></label>
    <input type="text" name="novoP" id="novoP" required>
    <br>

    <label for="desc"><b>Descrição:</b></label>
    <input type="text" name="desc" id="desc" required>
    <br>

    <label for="precoP"><b>Preço:</b></label>
    <input type="number" name="precoP" id="precoP" required>
    <br>

    <label for="Foto"><b>Foto:</b></label>
    <input type="file" name="fotoP" id="Foto" required>
    <br>

    <!--quando clica na checkbox aparece o div personalizar-->
    <label for="isPers"><b>Personalizável:</b></label>
    <input class ="checkbox" type="checkbox" id="isPers" name="isPers" value="True">
      <!-- dados produto -->
        <div id="question">
            
        </div>



     
    
  
</form>
{% endblock content %}

{% block js %}
  {% load static %}
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script>
    var q=0;

    $(document).on('change', '.checkbox', function() {   
        var button;    
        if(this.checked ) {
            var test = $('<input/>', {
                type: 'submit',
                class: 'add_questao',
                value: 'Adiciona Questão',
                click: function () { Cria_Questao(); }
            });
            $('#question').append(test).end();
            Cria_Questao();
            }else{
                $('.add_questao').remove();
                $('.add_op').remove();
                $('.questao').remove();
                $('.questaoLabel').remove();
                $('.remover').remove();
                q=0;
            }
        });

        function Cria_Questao(){
            q++;
            var quez=q;
            if(q>4){
                alert("nao pode criar mais");
            }else{
                var add_op = $('<input/>', {
                type: 'submit',
                value: 'Adiciona Opção',
                class: 'add_op',
                text: 'Adiciona Opção',
                click: function () { adicionar(quez) ; }
                });
                label="<label  class=questaoLabel for=questao"+(q)+"'>Questao</label>"
                input = jQuery('<input class=questao type="text" id="questao_'+(q)+'" name="questao" required>');
                jQuery('#formulario').append("<br class=remover>"+label).append(input).append(add_op).append("<br class=remover>");
                adicionar(quez);
            }
  
          
        }
      
        function adicionar(sapo){
           inputi = jQuery('<input class=questao type="text" id="opcao_'+(sapo)+'" name="questao_'+(sapo)+'" required>');
           jQuery('#formulario').append("<label  class=questaoLabel for=opcao_"+(sapo)+"'>Opção</label> ").append(inputi).append("<br class=remover>");
        }
 

      </script>
  {% endblock js %}

